<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ABSI NEXUS | Professional Trading Hub</title>
    <style>
        :root { --bg: #0b0e11; --panel: #1e2329; --gold: #f0b90b; --buy: #0ecb81; --sell: #f6465d; --text-gray: #848e9c; }
        body { background-color: var(--bg); color: white; margin: 0; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; overflow: hidden; height: 100vh; display: flex; flex-direction: column; }
        
        /* Ø§Ù„Ù‡ÙŠØ¯Ø± */
        header { padding: 10px 15px; background: var(--panel); display: flex; justify-content: space-between; align-items: center; border-bottom: 1px solid #333; height: 60px; box-sizing: border-box; flex-shrink: 0; }
        .wallet-btn { background: var(--gold); color: black; padding: 6px 15px; border-radius: 6px; font-weight: bold; border: none; cursor: pointer; font-size: 0.9rem; }

        /* Ù…Ù†Ø·Ù‚Ø© Ø§Ù„ØªØ­ÙƒÙ… ÙˆØ§Ù„Ø¹Ù…Ù„Ø§Øª */
        .market-header { background: #1e2329; padding: 10px 15px; display: flex; justify-content: space-between; align-items: center; border-bottom: 1px solid #2b3139; flex-shrink: 0; }
        select { background: #2b3139; color: var(--gold); border: 1px solid #444; border-radius: 4px; padding: 5px; outline: none; font-weight: bold; width: 140px; }

        /* Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø±Ø³Ù… Ø§Ù„Ø¨ÙŠØ§Ù†ÙŠ - Ø§Ù„Ø£Ø¯Ø§Ø© Ø§Ù„Ø£Ù‡Ù… */
        #tradingview_container { flex-grow: 1; position: relative; width: 100%; background: #000; }
        #tv_chart { height: 100% !important; width: 100% !important; }

        /* Ù„ÙˆØ­Ø© Ø§Ù„ØªØ¯Ø§ÙˆÙ„ Ø§Ù„Ø³ÙÙ„ÙŠØ© */
        .trade-footer { background: var(--panel); padding: 15px; border-radius: 20px 20px 0 0; border-top: 1px solid #333; flex-shrink: 0; }
        .input-box { width: 100%; padding: 12px; margin-bottom: 12px; background: #2b3139; border: 1px solid #444; color: white; border-radius: 10px; text-align: center; font-size: 1rem; box-sizing: border-box; }
        .btn-row { display: flex; gap: 10px; }
        .btn-t { flex: 1; padding: 14px; border: none; border-radius: 10px; font-weight: bold; color: white; font-size: 1rem; cursor: pointer; transition: 0.2s; }

        /* Ø§Ù„Ù‚ÙˆØ§Ø¦Ù… Ø§Ù„Ù…Ù†Ø¨Ø«Ù‚Ø© (Ø§Ù„Ø£Ù…Ø§Ù† ÙˆØ§Ù„ØµÙˆØ±) */
        .full-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: var(--bg); z-index: 9999; display: none; flex-direction: column; }
        .overlay-header { padding: 20px; border-bottom: 1px solid #222; display: flex; align-items: center; }
        .avatar-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 12px; padding: 20px; }
        .avatar-item { width: 70px; height: 70px; border-radius: 50%; border: 2px solid #333; cursor: pointer; overflow: hidden; }
        .sec-row { display: flex; justify-content: space-between; padding: 20px; border-bottom: 1px solid #1e2329; cursor: pointer; }

        /* Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠØ© Ù„Ù„Ù…Ù„Ù Ø§Ù„Ø´Ø®ØµÙŠ */
        .user-side { position: fixed; top: 0; right: -100%; width: 100%; height: 100%; background: var(--bg); z-index: 5000; transition: 0.4s; overflow-y: auto; }
        .user-side.active { right: 0; }
    </style>
</head>
<body>

    <header>
        <div style="display:flex; align-items:center; gap:12px;">
            <div onclick="toggleUserSide()" style="font-size:1.8rem; cursor:pointer;" id="top-avatar">ğŸ‘¤</div>
            <button class="wallet-btn" onclick="alert('Ø®ÙŠØ§Ø±Ø§Øª Ø§Ù„Ø¥ÙŠØ¯Ø§Ø¹: Ø²ÙŠÙ† ÙƒØ§Ø´ØŒ P2PØŒ Ø¨Ù†Ùƒ')">Ù…Ø­ÙØ¸ØªÙŠ</button>
        </div>
        <div style="color:var(--gold); font-weight:bold; font-size:1.1rem;">ABSI NEXUS</div>
    </header>

    <div class="market-header">
        <select id="pairList" onchange="changeSymbol(this.value)">
            <option value="BTCUSDT">Bitcoin (BTC)</option>
            <option value="ETHUSDT">Ethereum (ETH)</option>
            <option value="SOLUSDT">Solana (SOL)</option>
            <option value="XRPUSDT">XRP</option>
            <option value="DOGEUSDT">Dogecoin</option>
            <option value="TRXUSDT">TRON</option>
            <option value="PEPEUSDT">PEPE</option>
        </select>
        <div id="price-now" style="color:var(--gold); font-weight:bold; font-family:monospace; font-size:1.1rem;">0.00 $</div>
    </div>

    <div id="tradingview_container">
        <div id="tv_chart"></div>
    </div>

    <div class="trade-footer">
        <input type="number" class="input-box" placeholder="Ø£Ø¯Ø®Ù„ Ø§Ù„ÙƒÙ…ÙŠØ© USDT">
        <div class="btn-row">
            <button class="btn-t" style="background:var(--buy)" onclick="alert('Ø±ØµÙŠØ¯ ØºÙŠØ± ÙƒØ§ÙÙ! ÙŠØ±Ø¬Ù‰ Ø§Ù„Ø¥ÙŠØ¯Ø§Ø¹ Ø¹Ø¨Ø± Ø²ÙŠÙ† ÙƒØ§Ø´')">Ø´Ø±Ø§Ø¡</button>
            <button class="btn-t" style="background:var(--sell)" onclick="alert('Ø±ØµÙŠØ¯ ØºÙŠØ± ÙƒØ§ÙÙ! ÙŠØ±Ø¬Ù‰ Ø§Ù„Ø¥ÙŠØ¯Ø§Ø¹ Ø¹Ø¨Ø± Ø²ÙŠÙ† ÙƒØ§Ø´')">Ø¨ÙŠØ¹</button>
        </div>
    </div>

    <div class="user-side" id="userSide">
        <div class="overlay-header">
            <div style="font-size:1.5rem; cursor:pointer;" onclick="toggleUserSide()">â”</div>
            <div style="margin-right:15px; font-weight:bold;">Ù…Ø±ÙƒØ² Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…</div>
        </div>
        <div style="text-align:center; padding:30px;">
            <div id="side-avatar-display" style="width:90px; height:90px; background:#2b3139; border-radius:50%; margin:0 auto 15px; border:2px solid var(--gold); overflow:hidden;">ğŸ‘¤</div>
            <div id="user-mail" style="font-weight:bold; font-size:1.2rem;">user@absi.top</div>
            <div style="color:var(--buy); font-size:0.8rem; margin-top:5px;">Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ø£Ù…Ø§Ù†: Ù…Ø±ØªÙØ¹ â”â”</div>
        </div>
        <div class="sec-row" onclick="openOverlay('avatarOverlay')"><span>Ø§Ù„ØµÙˆØ±Ø© Ø§Ù„Ø´Ø®ØµÙŠØ©</span> â”</div>
        <div class="sec-row" onclick="openOverlay('securityOverlay')"><span>Ø§Ù„Ø£Ù…Ø§Ù† (ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±)</span> â”</div>
        <div class="sec-row" onclick="alert('UID ØªÙ… Ù†Ø³Ø®Ù‡!')"><span>UID</span> <span id="uid-display" style="color:var(--gold);">510688194</span></div>
        <button onclick="localStorage.clear(); location.reload();" style="width:90%; margin:30px 5%; padding:15px; background:#1e2329; color:var(--sell); border:1px solid #333; border-radius:12px; font-weight:bold;">Ø®Ø±ÙˆØ¬</button>
    </div>

    <div class="full-overlay" id="avatarOverlay">
        <div class="overlay-header"><div style="font-size:1.5rem; cursor:pointer;" onclick="closeOverlays()">â”</div><div style="margin-right:15px;">Ø§Ø®ØªØ± ØµÙˆØ±ØªÙƒ</div></div>
        <div class="avatar-grid" id="avatarLib"></div>
        <div style="padding:20px;"><button class="wallet-btn" style="width:100%; padding:15px;" onclick="saveMyAvatar()">ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø§Ø®ØªÙŠØ§Ø±</button></div>
    </div>

    <div class="full-overlay" id="securityOverlay">
        <div class="overlay-header"><div style="font-size:1.5rem; cursor:pointer;" onclick="closeOverlays()">â”</div><div style="margin-right:15px;">Ù…Ø±ÙƒØ² Ø§Ù„Ø£Ù…Ø§Ù†</div></div>
        <div style="padding:20px;">
            <input type="password" class="input-box" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø§Ù„Ù‚Ø¯ÙŠÙ…Ø©">
            <input type="password" class="input-box" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©">
            <div style="display:flex; gap:10px;">
                <input type="text" class="input-box" placeholder="Ø±Ù…Ø² OTP">
                <button onclick="alert('Ø§Ù„Ø±Ù…Ø² Ø§Ù„Ø³Ø±ÙŠ Ø§Ù„Ø®Ø§Øµ Ø¨Ùƒ Ù‡Ùˆ: '+ Math.floor(100000+Math.random()*900000))" style="height:48px; background:var(--panel); color:var(--gold); border:1px solid #444; border-radius:8px; padding:0 10px;">Ø¥Ø±Ø³Ø§Ù„</button>
            </div>
            <button class="wallet-btn" style="width:100%; padding:15px;" onclick="alert('ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª!'); closeOverlays();">ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø£Ù…Ø§Ù†</button>
        </div>
    </div>

    <script src="https://s3.tradingview.com/tv.js"></script>
    <script>
        let currentImg = "";

        function toggleUserSide() { document.getElementById('userSide').classList.toggle('active'); }
        function openOverlay(id) { document.getElementById(id).style.display = 'flex'; }
        function closeOverlays() { document.querySelectorAll('.full-overlay').forEach(o => o.style.display='none'); }

        // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø´Ø§Ø±Øª Ù…Ø¹ Ø´Ø±ÙŠØ· Ø§Ù„Ø£Ø¯ÙˆØ§Øª (ÙÙŠØ¨ÙˆÙ†Ø§ØªØ´ÙŠ)
        function initChart(symbol) {
            new TradingView.widget({
                "autosize": true,
                "symbol": "BINANCE:" + symbol,
                "interval": "1",
                "theme": "dark",
                "style": "1",
                "locale": "ar",
                "toolbar_bg": "#f1f3f6",
                "hide_side_toolbar": false, // Ù…Ù‡Ù… Ø¬Ø¯Ø§Ù‹ Ù„Ø¥Ø¸Ù‡Ø§Ø± Ø£Ø¯ÙˆØ§Øª Ø§Ù„Ø±Ø³Ù…
                "container_id": "tv_chart"
            });
            connectPrice(symbol);
        }

        function connectPrice(s) {
            const ws = new WebSocket(`wss://stream.binance.com:9443/ws/${s.toLowerCase()}@ticker`);
            ws.onmessage = (e) => {
                const d = JSON.parse(e.data);
                document.getElementById('price-now').innerText = parseFloat(d.c).toFixed(2) + " $";
            };
        }

        function changeSymbol(v) { initChart(v); }

        // ØªÙˆÙ„ÙŠØ¯ Ø§Ù„Ø£ÙØ§ØªØ§Ø±Ø²
        function genAvatars() {
            const lib = document.getElementById('avatarLib');
            for(let i=1; i<=20; i++){
                let url = `https://api.dicebear.com/7.x/avataaars/svg?seed=${i+123}`;
                let img = document.createElement('img');
                img.src = url;
                img.className = 'avatar-item';
                img.onclick = function() {
                    document.querySelectorAll('.avatar-item').forEach(el => el.style.borderColor='#333');
                    this.style.borderColor = '#f0b90b';
                    currentImg = url;
                };
                lib.appendChild(img);
            }
        }

        function saveMyAvatar() {
            if(currentImg) {
                localStorage.setItem('user_img', currentImg);
                document.getElementById('side-avatar-display').innerHTML = `<img src="${currentImg}" style="width:100%; height:100%;">`;
                document.getElementById('top-avatar').innerHTML = `<img src="${currentImg}" style="width:30px; height:30px; border-radius:50%;">`;
                closeOverlays();
            }
        }

        window.onload = () => {
            initChart("BTCUSDT");
            genAvatars();
            
            let email = localStorage.getItem('absi_user') || "user@absi.top";
            document.getElementById('user-mail').innerText = email;
            
            const saved = localStorage.getItem('user_img');
            if(saved) {
                document.getElementById('side-avatar-display').innerHTML = `<img src="${saved}" style="width:100%; height:100%;">`;
                document.getElementById('top-avatar').innerHTML = `<img src="${saved}" style="width:30px; height:30px; border-radius:50%;">`;
            }
            
            let uid = localStorage.getItem('absi_uid') || Math.floor(100000000 + Math.random() * 900000000);
            localStorage.setItem('absi_uid', uid);
            document.getElementById('uid-display').innerText = uid;
        };
    </script>
</body>
</html>
